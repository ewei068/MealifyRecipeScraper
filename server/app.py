from unittest import result
from flask import Flask
from flask import render_template
from flask import request
from flask import jsonify
import os
from flask_cors import CORS
from recipe_scrapers import scrape_me
import os
from tqdm import tqdm
from fuzzywuzzy import fuzz
from ingreedypy import Ingreedy
import json
import uuid
import cohere
import psycopg2

app = Flask("RecipeBot", template_folder=os.path.abspath('../client/build'), static_folder=os.path.abspath('../client/build/static'))
CORS(app)

co = cohere.Client(os.environ["COHERE_KEY"])
quantity_parser = Ingreedy()

units = {
    "ounce",
    "cup",
    "teaspoon",
    "tablespoon",
    "pound",
    "pinch",
    "can",
    "package",
    "slice",
    "pint",
    "clove",
    "stick",
    "stalk",
    "dash",
    "piece",
    "gram",
    "head",
    "quart",
    "ear",
    "strip",
    "box",
    "ml",
    "sprig",
    "bunch",
    "dozen",
    "bottle",
    "handful",
    "fillet",
    "bag",
    "gallon",
    "loaf",
    "bulb"
}

unit_map = {
    "c.": "cup",
    "cup cup": "cup",
    "lbs": "pound",
    "lb": "pound",
    "lb.": "pound",
    "tbsp": "tablespoon",
    "tbsp.": "tablespoon",
    "tsp": "teaspoon",
    "tsp.": "teaspoon",
    "12": "dozen",
    "g": "gram",
    "gal.": "gallon",
    "gal": "gallon",
    "oz": "ounce",
    "oz.": "ounce"
}

top_ingredients = set(['tart', 'havarti cheese', 'masala', 'liqueur', 'mini marshmallows', 'artificial', 'apple brandy', 'whipped cream', 'pork sausage', 'grey poupon dijon mustard', 'figs', 'bicarbonate', 'yellow bell peppers', 'vegetable oil spray', 'crust', 'butternut squash', 'seltzer', 'penne rigate', 'chocolate', 'mustard powder', 'garnish', 'focaccia', 'sprig', 'angel hair', 'sweet peppers', 'monosodium glutamate', 'brussels sprouts', 'chocolate graham crackers', 'italian pork sausage', 'almonds', 'shiitake mushrooms', 'chicken', 'pumpkin pie spice', 'brown basmati rice', 'tentacles', 'quinoa', 'russet', 'cooking liquid', 'dates', 'belgian endive', 'grouper', 'beef stew', 'dried fig', 'mushroom', 'fast rising yeast', 'phyllo', 'buffalo mozzarella', 'crab sticks', 'concentrate', 'vanilla vodka', 'barilla', 'plain chocolate', 'ranch dip', 'rice', 'dry', 'pickling salt', 'corn husks', 'unbleached', 'ragu', 'sharp white cheddar cheese', 'maggi', 'soda', 'baby spinach leaves', 'frozen mixed berries', 'popcorn', 'tarragon', 'chickpeas', 'crushed red pepper flakes', 'pepitas', 'pasta shells', 'cajun seasoning', 'urad dal', 'unbleached cane sugar', 'tempura batter', 'chinese noodles', 'ginger root', 'tequila', 'vidalia onion', 'fruit', 'green cardamom pods', 'light molasses', 'dark rum', 'red grape', 'pepper flakes', 'bread crumb fresh', 'creole mustard', 'escarole', 'italian cheese blend', 'thai red curry paste', 'condensed cream of chicken soup', 'tapioca starch', 'chile pepper', 'duck fat', 'suet', 'fl', 'habanero chile', 'hot pork sausage', 'finely chopped onion', 'tonic water', 'carrot sticks', 'relish', 'toasted sesame oil', 'celery ribs', 'fig', 'canned chicken', 'irish cream liqueur', 'glutinous rice flour', 'ground flaxseed', 'dried sweetened cranberries', 'unsweetened apple juice', 'asafetida', 'spam', 'tomato', 'frozen corn kernels', 'yellow cornmeal', 'yellow pepper', 'apricot', 'thai basil', 'vanilla extract', 'leaf lettuce', 'muffin', 'coffee granules', 'egg product', 'cactus', 'lamb shoulder', 'cream', 'beef shoulder', 'fresh rosemary', 'mace', 'apricot nectar', 'mixed dried fruit', 'solid pack pumpkin', 'ground flax seeds', 'sprouts', 'blend', 'long-grain rice', 'fresh oregano', 'fiber one', 'middle eastern', 'unsulfured molasses', 'thyme sprig', 'lemonade concentrate', 'salad greens', 'beef stew meat', 'red beans', 'horseradish sauce', 'italian salad dressing', 'pineapple chunks', 'flax seed meal', 'chili paste with garlic', 'pitted olives', 'cashews', 'unsweetened coconut flakes', 'cocoa solids', 'seafood stock', 'sweet and sour sauce', 'blanched hazelnuts', 'unbleached white flour', 'short rib', 'malt vinegar', 'muscovado sugar', 'chicken gravy', 'butterscotch chips', 'low sodium soy sauce', 'wholewheat', 'center cut bacon', 'cinnamon powder', 'dried parsley', 'sour mix', 'serrano chilies', 'wing sauce', 'cumin ground', 'green peppercorns', 'pistachio', 'fresh mushrooms', 'chili powder', 'white mushrooms', 'beef gravy', 'apple pie filling', 'sourdough', 'agave syrup', 'margarita mix', 'boneless chicken thighs', 'beef consomme', 'green chilis', 'cherry tomatoes', 'ground red pepper', 'thousand island dressing', 'canned corn', 'yellowtail', 'sucanat', 'unsweetened coconut', 'pie pastry', 'mexican beer', 'veal shanks', 'usukuchi soy sauce', 'thin spaghetti', 'black sesame seed', 'sweetened condensed milk', 'firmly packed brown sugar', 'broccoli', 'chicken livers', 'whole', 'boneless chicken skinless thigh', 'pink peppercorns', 'topping', 'tabasco pepper sauce', 'chili peppers', 'pears', 'fructose', 'corn tortilla chips', 'chili paste', 'sangiovese', 'black bass', 'butternut', 'ice cream', 'chocolate flavored syrup', 'almond flour', 'semolina', 'aquavit', 'watermelon', 'candied cherries', 'ground chicken breast', 'rack of lamb', 'cream of tartar', 'fruit cocktail', 'teriyaki marinade', 'blue cheese dressing', 'frozen shelled edamame', 'dill seed', 'herbs', 'tostadas', 'won ton wrappers', 'ricotta salata', 'penne', 'grated parmesan cheese', 'pork tenderloin', 'baby spinach', 'ground sirloin', 'chocolate morsels', 'anchovies', 'chilis', 'raisin bread', 'yellow corn', 'flaked coconut', 'vanilla wafer crumbs', 'orange', 'ground thyme', 'mexicorn', 'dehydrated onion', 'pita chips', 'franks hot sauce', 'pickling liquid', 'green peas', 'unbaked pie crusts', 'chinese egg noodles', 'chopped pecans', 'herb seasoning', 'penne pasta', 'miso paste', 'vanilla bean ice cream', 'pork fat', 'olive oil cooking spray', 'coating', 'milk chocolate', 'grapefruit', 'oscar mayer bacon', 'flat anchovy', 'chicken breast', 'hazelnut oil', 'lime leaves', 'malted milk powder', 'walnuts', 'bocconcini', 'palm', 'sliced', 'chocolate liqueur', 'broccoli stems', 'wasabi powder', 'amaretto liqueur', 'brownie', 'tofu', 'raw cane sugar', 'turkey legs', 'fronds', 'virgin olive oil', 'graham cracker crumbs', 'homemade chicken stock', 'berries', 'instant potato flakes', 'cherry pie filling', 'dashi', 'softened butter', 'vegan margarine', 'flavored vodka', 'canola mayonnaise', 'other nuts', 'pure vanilla extract', 'french onion soup', 'dried shiitake mushrooms', 'whole wheat', 'cornish game hens', 'flaked', 'coffee ice cream', 'apricots', 'toast', 'chicken wings', 'extra sharp cheddar cheese', 'corned beef', 'dark soy', 'fatback', 'olive oil', 'filet mignon', 'pineapple', 'frozen raspberries', 'instant butterscotch pudding mix', 'gelatine', 'dried pineapple', 'chili oil', 'sundried tomatoes', 'oat flour', 'italian plum tomatoes', 'corn muffin', 'seasonings', 'tilapia', 'greek yogurt', 'bass fillets', 'chicken strips', 'white granulated sugar', 'chicken broth', 'cranberry juice', 'sea bass', 'sugar cubes', 'seasoning mix', 'vanilla', 'pork cutlets', 'chablis', 'buffalo', 'fava beans', 'icing', 'new york strip steaks', 'cranberry juice cocktail', 'crackers', 'glaze', 'white vermouth', 'concentrated', 'yogurt cheese', 'limoncello', 'turkey stock', 'anjou pears', 'peach nectar', 'mango', 'key lime', 'brine', 'egg', 'apple cider', 'hot italian sausages', 'chocolate sprinkles', 'edamame', 'blood orange', 'butterscotch', 'anaheim chile', 'citrus', 'stewing beef', 'shiitake mushroom', 'snow pea pods', 'pitas', 'low fat', 'white onions', 'limeade concentrate', 'table cream', 'persimmon', 'pea shoots', 'gyoza', 'nutmeg', 'shortcrust pastry', 'clove ground', 'porridge oats', 'beef broth', 'boneless skinless chicken thighs', 'yellow split peas', 'egg beaters', 'hot chili sauce', 'light butter', 'distilled white vinegar', 'kraft zesty italian dressing', 'sultana', 'yeast', 'papaya', 'powdered gelatin', 'fresh ginger', 'sweet pickle', 'vegetable stock', 'stevia', 'okra', 'chicken flavor', 'sugar cookie dough', 'sweetened', 'cilantro stems', 'gelatin', 'pita bread', 'whipping cream', 'sake', 'ginger ale', 'carbonated', 'extra lean ground beef', 'muenster', 'rice cereal', 'spices', 'packed', 'shellfish', 'clams', 'flavors', 'dulce de leche', 'mild sausage', 'gyoza skins', 'chestnuts', 'green', 'plum tomatoes', 'leeks', 'ricotta', 'wheat bran', 'pinenuts', 'risotto', 'all-purpose flour', 'mochi', 'skim milk', 'vermicelli', 'poultry', 'ground turkey', 'garlic bulb', 'salsa', 'coffee beans', 'salad dressing mix', 'peppermint extract', 'shoepeg corn', 'garlic bread', 'beef tenderloin', 'sweet pickle relish', 'silver tequila', 'calvados', 'turkey', 'wine', 'thai fish sauce', 'base', 'dried red', 'turkey gravy', 'oil', 'crab meat', 'corn tortillas', 'salted butter', 'preserved lemon', 'beef bouillon granules', 'black mushrooms', 'vanilla frozen yogurt', 'ginger beer', 'spice mix', 'vegetable soup', 'coconut flour', 'lobster', 'zinfandel', 'dry mustard', 'dried rice noodles', 'enchilada sauce', 'white tequila', 'refrigerated crescent rolls', 'leg quarters', 'genoa salami', 'vegetable juice', 'taco shells', 'fresh ginger root', 'mission figs', 'nonfat yogurt', 'golden beets', 'dry bread crumbs', 'white cheddar cheese', 'caramels', 'pepperoni', 'guanciale', 'bibb lettuce', 'toasted baguette', 'ground turmeric', 'cherry peppers', 'frozen cherries', 'dried celery', 'sandwich cookies', 'frying oil', 'essence', 'cane sugar', 'tasso', 'red beets', 'demerara sugar', 'lasagna noodles', 'pork sausages', 'cayenne', 'sour milk', 'baking apples', 'pineapple juice', 'sliced cucumber', 'boneless pork', 'salt water', 'minced meat', 'marmite', 'romaine lettuce hearts', 'frozen strawberries', 'walnut oil', 'baking mix', 'asafetida powder', 'water', 'risotto rice', 'heinz chili sauce', 'a', 'frozen potatoes', 'armagnac', 'asafoetida', 'green bell pepper', 'celery seed', 'plain flour', 'pasta', 'natural', 'tarragon leaves', 'fully cooked ham', 'organic', 'cocoa butter', 'kraft grated parmesan cheese', 'vanilla yogurt', 'couscous', 'fresh', 'low-fat milk', 'jumbo pasta shells', 'dried pinto beans', 'ground lamb', 'hot chili powder', 'baby lima beans', 'gherkins', 'jaggery', 'mushroom broth', 'nori seaweed', 'bouillon granules', 'kiwi fruits', 'sirloin steak', 'cashew', 'sweet soy', 'truffles', 'vegetarian', 'chardonnay', 'togarashi', 'eggnog', 'dream whip', 'caramel ice cream topping', 'roasted peanuts', 'minute rice', 'mentsuyu', 'chambord', 'japanese breadcrumbs', 'shell pasta', 'safflower', 'mung bean sprouts', 'lobster tails', 'rub', 'quick oats', 'parsnips', 'stilton', 'pappardelle', 'taco sauce', 'harissa paste', 'mackerel', 'mozzarella', 'yellow summer squash', 'vanilla cake mix', 'crumbs', 'fresh tomatoes', 'pinot noir', 'peeled fresh ginger', 'coffee creamer', 'salted cashews', 'yellow mustard', 'split peas', 'seedless raisins', 'roasted', 'shrimp', 'baby potatoes', 'chick peas', 'montreal steak seasoning', 'chocolates', 'european cucumber', 'frisee', 'medium shrimp', 'jalapeno peppers', 'toasted wheat germ', 'grenadine', 'honey', 'cooked macaroni', 'grilled chicken', 'sweetened coconut flakes', 'aioli', 'kraft sun dried tomato vinaigrette', 'iodized salt', 'seaweed', 'frozen tater tots', 'smoked turkey breast', 'fettuccine pasta', 'ajwain', 'rose petals', 'cookie crumbs', 'glutinous rice', 'phyllo dough', 'wine vinegar', 'onion tops', 'yellow mustard seeds', 'smoked turkey', 'hot sausage', 'celery hearts', 'dressing', 'sweet pepper', 'curds', 'peeled tomatoes', 'chuck', 'tostada shells', 'eye of round roast', 'kefir', 'red radishes', 'veal loin', 'maraschino', 'corn bread', 'green beans', 'color', 'granulated sugar', 'herb', 'vegetables', 'peanut butter chips', 'baking spray', 'liver', 'mascarpone cheese', 'sardines', 'gooseberries', 'bell peppers', 'porcini', 'black tea', 'eye steaks', 'lemon flavor', 'mix', 'seasoned chicken', 'sandwich rolls', 'mild curry powder', 'white corn syrup', 'rigatoni', 'bouquet', 'salt pork', 'dried figs', 'clover', 'napa cabbage', 'semisweet chocolate chunks', 'skim milk powder', 'butter cooking spray', 'orange rind', 'dried red pepper', 'cheese ravioli', 'zesty italian dressing', 'nondairy whipped topping', 'biscuit baking mix', 'dried sage', 'red chile peppers', 'mint sprigs', 'ziti', 'fresh lemon juice', 'southern comfort', 'leek', 'pimientos', 'for color', 'warm water', 'sweet potato', 'onion salt', 'lamb loin', 'wholemeal', 'peeled deveined shrimp', 'lime slices', 'miniature chocolate chips', 'lemon rind', 'gravy', 'wasabi paste', 'red wine vinegar', 'luncheon meat', 'jasmine', 'basil leaves', 'scallions', 'peppermint', 'sea bass fillets', 'lime', 'cooking sherry', 'wondra flour', 'mahi mahi', 'shredded cheese', 'season', 'hungarian sweet paprika', 'tuna drained and flaked', 'light corn syrup', 'golden delicious', 'pomegranate', 'celtic sea salt', 'banana liqueur', 'vanilla frosting', 'queso fresco', 'firm silken tofu', 'dried shrimp', 'american', 'smoked salmon', 'romano cheese', 'flank steak', 'bay leaf', 'peasant bread', 'bulb fennel', 'fresh mozzarella', 'kabocha squash', 'instant chicken bouillon granules', 'basil leaf', 'ale', 'ritz crackers', 'cannellini', 'in water', 'chow mein noodles', 'carcass', 'powdered sugar', 'italian vinaigrette', 'dry fettuccine', 'seasoned salt', 'cinnamon rolls', 'crumbles', 'grenadine syrup', 'chipotle chile pepper', 'popped popcorn', 'cornbread mix', 'san marzano tomatoes', 'slab bacon', 'ice water', 'kaffir lime leaves', 'light tuna', 'white bread slices', 'boneless skinless chicken', 'potato', 'ground cardamom', 'fajita seasoning mix', 'vegetable oil cooking spray', 'sushi rice', 'green chiles', 'chile sauce', 'tahini', 'almond liqueur', 'chanterelle', 'coconut oil', 'cilantro leaves', 'tomato paste', 'cornichons', 'brazil', 'mixed vegetables', 'frozen artichoke hearts', 'toasted almonds', 'quinoa flour', 'chicken parts', 'ground cumin', 'curry leaf', 'beefsteak tomatoes', 'shelled pistachios', 'swiss chard', 'pasta water', 'caesar salad dressing', 'slaw mix', 'liquid smoke', 'savoy cabbage', 'salad oil', 'green chili peppers', 'brownies', 'buttermilk biscuits', 'bamboo shoots', 'tumeric', 'asiago cheese', 'lamb shanks', 'garlic', 'apple jelly', 'kidney', 'maple extract', 'fruits', 'sweet chili sauce', 'dark molasses', 'sole', 'frozen lemonade concentrate', 'shredded carrots', 'french fried onions', 'roasted peppers', 'cremini', 'food colouring', 'cream of potato soup', 'honey mustard dressing', 'chocolate cookie crumbs', 'bucatini', 'emerils original essence', 'caraway', 'low salt chicken broth', 'yellow bell pepper', 'green garlic', 'tamarind', 'pickles', 'bittersweet chocolate chips', 'cheese dip', 'tamarind pulp', 'green tea bags', 'instant', 'hot sauce', 'superfine sugar', 'nuts', 'italian seasoned breadcrumbs', 'riesling', 'kidney beans', 'chicken leg quarters', 'shells', 'unsweetened', 'hot pepper', 'pie shell', 'rotini pasta', 'whipped cream cheese', 'sugar pumpkin', 'minced garlic', 'dried orange peel', 'chai tea', 'artificial sweetener', 'pearl tapioca', 'green pepper', 'jiffy corn muffin mix', 'rubbed sage', 'semisweet vegan chocolate chips', 'wheat cereal', 'white vinegar', 'fresh thyme leaves', 'lemongrass', 'scallion greens', 'chayotes', 'rum', 'mint extract', 'kosher', 'flower', 'blueberry pie filling', 'mayonaise', 'baby arugula', 'boston lettuce', 'real bacon', 'shortbread cookies', 'mint chocolate chip ice cream', 'herb dressing', 'fudge', 'sausage meat', 'chard', 'corn meal', 'strawberry', 'tap water', 'cake', 'frozen sweet corn', 'piquillo peppers', 'boiling potatoes', 'flax meal', 'white', 'white grape juice', 'mandarin oranges', 'balsamic vinaigrette', 'tea bags', 'chipotle powder', 'jalapeno pepper', 'red leaf lettuce', 'calamari', 'panko breadcrumbs', 'whole wheat flour', 'cheese spread', 'dried egg', 'natural peanut butter', 'cubed bread', 'lamb chops', 'red lentils', 'beaten eggs', 'salad leaves', 'rye bread', 'sliced green onions', 'cilantro sprigs', 'chuck roast', 'cooked pumpkin', 'frozen spinach', 'iron', 'kitchens', 'arrow root', 'diced onions', 'chili', 'light cream cheese', 'dried chili', 'grated horseradish', 'sweet italian sausage', 'prawns', 'citric acid', 'plantains', 'red chili peppers', 'grated carrot', 'file powder', 'ice cubes', 'crisco pure vegetable oil', 'bread flour', 'shucked oysters', 'wafer cookies', 'pizza sauce', 'shortbread', 'fiber', 'ground sausage', 'dark raisins', 'puff pastry', 'chutney', 'sugar brown sugar', 'claws', 'ground sage', 'cherries', 'andouille sausage', 'liquid egg substitute', 'canned coconut milk', 'frozen vegetables', 'brown cardamom', 'grape juice', 'brandy', 'pure vanilla', 'cooked white rice', 'sesame seeds', 'hot red pepper flakes', 'semolina flour', 'marsala wine', 'wholegrain mustard', 'cream sherry', 'sweet corn', 'lean ground pork', 'paprika powder', 'parmesan cheese', 'casings', 'crostini', 'sweet rice', 'frozen bread dough', 'wild mushrooms', 'curry paste', 'radicchio leaves', 'roasted sesame seeds', 'cookies', 'vegan mayonnaise', 'poblano peppers', 'cupcakes', 'cardamom', 'grated romano cheese', 'caramel topping', 'marshmallows', 'tomatoes', 'thai chile', 'hummus', 'french bread', 'angostura bitters', 'doubanjiang', 'canned black beans', 'fleur de sel', 'ground white pepper', 'dried onion', 'lemonade', 'cooked potatoes', 'caramel syrup', 'cooked chicken', 'grapes', 'almond filling', 'vanilla flavor', 'kale leaves', 'bagel', 'london broil', 'ganache', 'catsup', 'cake yeast', 'zucchini', 'cornstarch', 'cremini mushrooms', 'cubed ham', 'manzanilla', 'loaves', 'asparagus tips', 'halfandhalf', 'kosher salt', 'lump crab meat', 'boneless beef round steak', 'tamari soy sauce', 'baked corn tortilla chips', 'rib eye steaks', 'chaat masala', 'red pepper flakes', 'semi sweet chocolate chips', 'flax seeds', 'rice krispies cereal', 'mousse', 'japanese eggplants', 'sliced chicken', 'smoked paprika', 'unsalted cashews', 'no', 'cooked black beans', 'flowers', 'cooked quinoa', 'turkish', 'dry pasta', 'avocado oil', 'filtered water', 'tangerine zest', 'buttercream frosting', 'sliced black olives', 'heavy whipping cream', 'buttermilk', 'combined', 'boursin', 'corn starch', 'earl grey tea bags', 'sunflower kernels', 'green apple', 'candied pineapple', 'ramen noodles', 'fresh sage', 'reduced sodium chicken broth', 'tomato ketchup', 'beef rump', 'jello', 'frozen banana', 'red bell peppers', 'blackberries', 'red raspberries', 'linguica', 'red peppers', 'onion powder', 'dark sesame oil', 'lasagne', 'distilled vinegar', 'garlic chili sauce', 'chorizo', 'endive', 'white button mushrooms', 'coriander powder', 'cherry brandy', 'mashed banana', 'tahini paste', 'lean bacon', 'beef sausage', 'mini chocolate chips', 'turkey bacon', 'kraft original barbecue sauce', 'orange zest', 'nutritional yeast', 'harissa', 'sprinkles', 'powdered milk', 'coke', 'knudsen light sour cream', 'honey sugar', 'lady apples', 'sandwich buns', 'bosc pears', 'ground chicken', 'ground coffee', 'white flour', 'chicken breast tenders', 'soba noodles', 'serrano peppers', 'karo syrup', 'turnip greens', 'orange bitters', 'taco seasoning', 'salted peanuts', 'yellow onions', 'cocoa powder', 'dried herbs', 'tater tots', 'tortilla shells', 'five spice', 'apricot brandy', 'fuji apple', 'tart cherries', 'paneer', 'black beans', 'mutton', 'coleslaw dressing', 'american cheese', 'orange roughy', 'plum sauce', 'fat free', 'baking soda', 'beets', 'oyster mushrooms', 'good seasons italian dressing mix', 'tapenade', 'pudding', 'lettuce hearts', 'soup mix', 'flour mix', 'low sodium vegetable broth', 'sliced leeks', 'bulgar wheat', 'chili pepper', 'garlic salt', 'nonhydrogenated margarine', 'pumpernickel bread', 'queso blanco', 'heavy cream', 'white onion', 'dough', 'sliced tomatoes', 'frozen blueberries', 'shredded cabbage', 'cream cheese frosting', 'part-skim mozzarella', 'chinese cabbage', 'fennel seed', 'soy sauce', 'ground beef', 'pizza seasoning', 'campanelle', 'unsweetened baking chocolate', 'hickory smoke', 'gingersnap', 'peanuts', 'flaxseed', 'soft cheese', 'berry', 'chips', 'regular soy sauce', 'italian sausage', 'salt and ground black pepper', 'cranberry beans', 'paprika', 'almond extract', 'stock', 'caraway seed', 'yolk', 'grated lemon peel', 'green tomatoes', 'goose', 'hot fudge topping', 'ground almonds', 'orange bell pepper', 'lean ground turkey', 'smooth', 'alfalfa', 'fine salt', 'tomato sauce', 'cilantro', 'jarlsberg', 'flavored syrup', 'onion soup', 'beef brisket', 'anise seed', 'red cabbage', 'sorghum flour', 'steak sauce', 'minced ginger', 'sun-dried tomatoes', 'dried mushrooms', 'sofrito', 'fresh tarragon', 'fresh chives', 'almond paste', 'chinese chives', 'pita bread rounds', 'whiskey', 'pork loin', 'greens', 'cooked ham', 'bacon bits', 'salted pistachios', 'tapioca', 'garlic cloves', 'shimeji mushrooms', 'plum jam', 'stew', 'blood orange juice', 'vinaigrette dressing', 'eggs', 'crushed red pepper', 'soft', 'shaved parmesan cheese', 'bittersweet chocolate', 'parsley leaves', 'oysters', 'cantaloupe', 'greek seasoning', 'chicken fat', 'neutral oil', 'vegan', 'house seasoning', 'meyer lemon', 'kimchi', 'flowerets', 'seedless red grapes', 'mint', 'almond meal', 'golden caster sugar', 'baby greens', 'moong dal', 'gram flour', 'biscuits', 'pumpkin pie filling', 'amaranth', 'sliced almonds', 'coriander seeds', 'italian parsley leaves', 'fat free milk', 'medium heat', 'turkish bay leaves', 'whiting', 'roasted pistachios', 'fine sea salt', 'rye flour', 'italian salad dressing mix', 'boiled ham', 'plastic', 'peanut oil', 'asparagus', 'yellow onion', 'peach slices', 'granulated onion', 'red chilli', 'chopped', 'white peppercorns', 'boneless chicken breast', 'rice wine vinegar', 'cheese slices', 'jam', 'mangoes', 'liverwurst', 'coffee', 'meringue', 'pecan halves', 'pearl barley', 'sweet relish', 'chicken breast halves', 'bean paste', 'boneless lamb', 'vanilla beans', 'fritos', 'white wine', 'mahi mahi fillets', 'parsley', 'frozen orange juice concentrate', 'spaghettini', 'chicken breast strips', 'vegetable', 'seafood', 'chillies', 'bacon slices', 'schnapps', 'red miso', 'meyer lemon juice', 'cooked brown rice', 'rice pilaf', 'mochiko', 'fat free less sodium chicken broth', 'fresh basil leaves', 'chili beans', 'baguette', 'confit', 'celery root', 'ghee', 'coarse kosher salt', 'canned tuna', 'cachaca', 'pecan', 'bean flour', 'extra virgin olive oil', 'catfish fillets', 'crispy rice cereal', 'worcestershire sauce', 'brewed coffee', 'chili seasoning mix', 'pasteurized', 'fermented black beans', 'white corn', 'marcona almonds', 'frozen chopped spinach', 'monkfish', 'skirt steak', 'rice vermicelli', 'condensed french onion soup', 'short pasta', 'clarified butter', 'blood', 'fresh cilantro', 'mixed spice', 'onion slices', 'dried lentils', 'smoked spanish paprika', 'wax', 'boiling water', 'condensed cream', 'broiler', 'peanut', 'pimentos', 'msg', 'albacore tuna', 'raspberries', 'whole milk', 'sweet chocolate', 'yellow food coloring', 'pickle juice', 'ground wheat', 'shredded cheddar cheese', 'cream cheese spread', 'cumin', 'dark corn syrup', 'deep dish pie crust', 'coconut flakes', 'muesli', 'cheese soup', 'shoyu', 'dried split peas', 'pork loin chops', 'smoked gouda', 'organic sugar', 'cucumbers', 'muenster cheese', 'cucumber', 'tilapia fillets', 'more', 'instant white rice', 'candied orange peel', 'blueberries', 'dried corn', 'tangerine', 'semi sweet chocolate', 'ground chuck', 'parsley sprigs', 'grape leaves', 'butter oil', 'winter squash', 'asparagus spears', 'cornbread stuffing mix', 'ground black pepper', 'bok choy', 'dehydrated', 'day old bread', 'scotch bonnet chile', 'potato flour', 'bacon', 'pumpkin puree', 'organic apple', 'red salmon', 'swede', 'chopped tomatoes', 'chopped fresh chives', 'fish bones', 'dried thyme', 'budweiser', 'manicotti', 'long grain brown rice', 'french rolls', 'pancetta', 'green onion', 'refrigerated buttermilk biscuits', 'mexican chorizo', 'melon liqueur', 'tortilla chips', 'extra firm tofu', 'fresh thyme', 'large egg whites', 'bacon fat', 'shallots', 'crystal hot sauce', 'dark brown sugar', 'condensed tomato soup', 'peach schnapps', 'ground pecans', 'chile peppers', 'chicory', 'champagne vinegar', 'food color', 'basil', 'black truffle oil', 'eggplants', 'long beans', 'pork chops', 'tartar sauce', 'dried porcini mushrooms', 'firmly packed light brown sugar', 'canadian bacon', 'celery', 'pesto', 'white cheese', 'nutritional yeast flakes', 'dessert wine', 'vegetable oil', 'fine egg noodles', 'salmon steaks', 'rib roast', 'mirin', 'sponge', 'fusilli', 'refried black beans', 'parmigiano', 'unsweetened pineapple juice', 'sliced mushrooms', 'dinner rolls', 'chopped onion', 'smoked pork', 'green chile peppers', 'lager beer', 'curly endive', 'haricots verts', 'garbanzo beans', 'muffin mix', 'unsweetened dried coconut', 'whisky', 'asiago', 'frozen peas and carrots', 'oats', 'sub rolls', 'bread slices', 'boneless pork shoulder', 'pea pods', 'turkey sausage', 'breadstick', 'celery heart', 'ditalini', 'cane syrup', 'toast points', 'broccolini', 'english mustard', 'cardamom seeds', 'cockles', 'ditalini pasta', 'light soy sauce', 'sirloin', 'fish fillets', 'merlot', 'currants', 'dairy', 'frozen limeade', 'pepper powder', 'ketchup', 'clove', 'masa', 'crumbled blue cheese', 'butterfinger', 'neufchatel cheese', 'white sandwich bread', 'tuna packed in water', 'shiitake', 'double cream', 'curry leaves', 'black peppercorns', 'marmalade', 'stone ground mustard', 'toasted', 'grand marnier', 'onion soup mix', 'cocktail sauce', 'white chocolate chips', 'prosciutto', 'dried fettuccine', 'romaine lettuce leaves', 'steak', 'arrowroot', 'cheese blend', 'garlic chives', 'french baguette', 'lobster meat', 'chocolate frosting', 'roasted chestnuts', 'elbow macaroni', 'meatloaf', 'sliced onion', 'pecans', 'chipotle chile powder', 'hamburger buns', 'fennel seeds', 'pork roast', 'black pepper ground', 'crab boil', 'cream of celery soup', 'vegetable stock powder', 'active yeast', 'chunky salsa', 'cake mix', 'smoked cheddar cheese', 'sweet basil', 'russet potatoes', 'white tuna', 'arrowroot powder', 'liquor', 'plums', 'egg whites', 'ice', 'fresh basil', 'jack', 'large eggs', 'unsalted margarine', 'portabella mushrooms', 'dry milk powder', 'veal shoulder', 'chicken pieces', 'starch', 'salt added', 'bay', 'cream of chicken soup', 'kitchen bouquet', 'oregano', 'jack daniels', 'chocolate cake mix', 'salad', 'squash', 'chocolate shavings', 'small red potato', 'coconut water', 'chrysanthemum', 'ground pepper', 'bread machine yeast', 'crabmeat', 'soybeans', 'green cardamom', 'sliced turkey', 'pepper cheese', 'arbol chile', 'cassava', 'ground walnuts', 'capsicum', 'cooked corned beef', 'chopped fresh sage', 'fennel', 'roasting chickens', 'popcorn kernels', 'worchestershire sauce', 'shelled pumpkin seeds', 'frozen meatballs', 'fresh parmesan cheese', 'coarse sugar', 'monosodium', 'mashed potatoes', 'chilies', 'dried apricots', 'ginger paste', 'prepared', 'burgundy', 'vegan butter', 'lipton onion soup mix', 'baking chocolate', 'feta cheese crumbles', 'vanilla flavoring', 'apple cider vinegar', 'lima beans', 'lamb neck', 'lard', 'mozzarella balls', 'bread and butter pickles', 'garbanzo', 'green tea leaves', 'peas', 'white rice flour', 'sauerkraut', 'egg noodles', 'crumbled goat cheese', 'strawberry flavor', 'lemon pepper seasoning', 'cola', 'seasoning blend', 'instant espresso', 'millet', 'raspberry puree', 'onion rings', 'mineral water', 'cooking spray', 'peperoncino', 'marjoram leaves', 'italian turkey sausage', 'ground veal', 'pork butt', 'dried tarragon leaves', 'katakuriko', 'mushrooms', 'temperature', 'green chilies', 'prepared mustard', 'char siu', 'baked beans', 'chorizo sausage', 'barbecue sauce', 'flour', 'sultanas', 'garlic puree', 'halibut', 'baby corn', 'canola oil', 'banana peppers', 'sweet onion', 'milkfat', 'fillets', 'crescent rolls', 'barley', 'vine ripened tomatoes', 'baby bok choy', 'rapeseed oil', 'lite coconut milk', 'lamb loin chops', 'clam juice', 'smoked bacon', 'fresh orange juice', 'pulp', 'ground pork sausage', 'sauce tomato', 'mexican cheese', 'turkey meat', 'chocolate milk', 'tempeh', 'nonstick spray', 'fruit juice', 'wheat berries', 'shaved chocolate', 'limes', 'vegetable bouillon', 'wheat flour', 'shrimp paste', 'sherry vinegar', 'tortellini', 'pastry shell', 'lumpia wrappers', 'brown sugar', 'pure olive oil', 'saffron', 'bean dip', 'chili pepper flakes', 'bouquet garni', 'organic chicken', 'squirt', 'cheese tortellini', 'orange juice concentrate', 'ground ginger', 'gala apples', 'bacon grease', 'oreo', 'oregano leaves', 'catfish', 'corn grits', 'chopped walnuts', 'bread rolls', 'dried onion flakes', 'greek style plain yogurt', 'pinto beans', 'cinnamon sticks', 'cooked chicken breasts', 'chilli', 'bagels', 'sweet cream butter', 'strawberry gelatin', 'corn kernels', 'puff pastry sheets', 'manchego cheese', 'chocolate cookie', 'amaretto', 'pitted cherries', 'olive oil flavored cooking spray', 'lamb stew meat', 'polenta', 'breast', 'cubed beef', 'spiced rum', 'fenugreek', 'cherry juice', 'thyme sprigs', 'fish stock', 'burgers', 'pomegranate molasses', 'pork shoulder butt', 'poblano chiles', 'cool whip', 'chocolate powder', 'turbinado sugar', 'cracker crumbs', 'potato flakes', 'asian chili sauce', 'sun dried tomatoes', 'shaoxing wine', 'tarragon vinegar', 'sunflower seeds', 'marzipan', 'pineapple rings', 'roasted red bell peppers', 'picante sauce', 'amaretti', 'rice mix', 'peach pie filling', 'cut up chicken', 'passion fruit', 'caramel', 'honeydew melon', 'feta cheese', 'somen', 'green grape', 'orange liqueur', 'spelt flour', 'peach', 'seasoned croutons', 'chicken meat', 'links', 'galangal', 'chocolate sauce', 'oxtails', 'croissants', 'red bean paste', 'crusty rolls', 'triple sec', 'raspberry sauce', 'yellow cake mix', 'bing cherries', 'beef stock', 'rye whiskey', 'chile powder', 'white kidney beans', 'sambuca', 'lemon zest', 'oatmeal', 'oils', 'paste', 'tangerine juice', 'asadero', 'mizuna', 'gold potatoes', 'granulated white sugar', 'iceberg lettuce', 'meatballs', 'candy canes', 'medium tomatoes', 'yellow peppers', 'xanthan gum', 'spanish paprika', 'pomegranate seeds', 'yeast packet', 'pumpkin', 'steel cut oats', 'bleached', 'boiled eggs', 'any', 'baby back ribs', 'red enchilada sauce', 'red bell pepper', 'thick-cut bacon', 'glace cherries', 'buckwheat flour', 'semisweet chocolate', 'kale', 'havarti', 'rosemary leaves', 'monterey jack cheese', 'boston butt', 'lettuce', 'lemon cake mix', 'top sirloin steak', 'instant oats', 'shortening', 'gluten free', 'bulgur', 'long grain white rice', 'low sodium chicken stock', 'red chili powder', 'lemon peel', 'strong white bread flour', 'ears', 'sesame oil', 'garlic pepper seasoning', 'boneless beef sirloin steak', 'root beer', 'egg roll wrappers', 'coarse black pepper', 'light brown sugar', 'green lentil', 'roasted red bell pepper', 'candy sprinkles', 'yuzu', 'vanilla wafers', 'ravioli', 'mango puree', 'mustard seeds', 'dark soy sauce', 'wild salmon', 'black', 'cheese sauce', 'mild italian sausage', 'fat free greek yogurt', 'sausage links', 'mexican oregano', 'light coconut milk', 'pie dough', 'guajillo chiles', 'medium potatoes', 'heath candy bars', 'grapefruit juice', 'alfredo sauce', 'dried rosemary', 'oat bran', 'coleslaw', 'garlic granules', 'apple butter', 'cooked pasta', 'sweet cherries', 'pernod', 'cream style corn', 'cauliflower', 'chicken tenderloins', 'poultry seasoning', 'green cabbage', 'red wine', 'low sodium', 'green chile', 'seasoned bread crumbs', 'creme de cacao', 'safflower oil', 'green tea powder', 'yukon gold potatoes', 'crescent dinner rolls', 'lobsters', 'chicken liver', 'cipollini', 'campari', 'kalamata', 'spearmint', 'portabello mushroom', 'semisweet chocolate chips', 'celery flakes', 'flounder fillets', 'dried minced onion', 'brown mustard', 'instant yeast', 'biscuit dough', 'chicken legs', 'sauvignon blanc', 'cake flour', 'chia seeds', 'mozzarella cheese', 'swiss cheese', 'liquid aminos', 'blanched almond flour', 'cheeses', 'dandelion greens', 'raspberry juice', 'wild', 'cheese', 'loin', 'broth', 'other', 'avocado', 'meat', 'croutons', 'papayas', 'bird chile', 'bresaola', 'chipotle salsa', 'skin', 'barbecue rub', 'pork ribs', 'rice flour', 'brioche', 'sweet soy sauce', 'white rice', 'unbleached flour', 'coconut sugar', 'white creme de cacao', 'canned salmon', 'dried beans', 'rolls', 'ground round', 'chocolate chunks', 'cooked bacon', 'bone in', 'sweet butter', 'nonfat vanilla yogurt', 'char', 'pancake', 'raw honey', 'minced chicken', 'bakers', 'raspberry liqueur', 'lentils', 'port', 'chipotle', 'wheat bread', 'sausages', 'swiss', 'corn flour', 'minced clams', 'collard greens', 'puffed rice', 'yellow', 'chicken thighs', 'light sour cream', 'jumbo shrimp', 'dried dill weed', 'yukon gold', 'flat leaf parsley', 'raisin', 'cinnamon ground', 'dried chiles', 'silken tofu', 'naan', 'kaffir lime', 'pineapple preserves', 'vegetable shortening', 'bechamel', 'cabbage', 'pork stew meat', 'pitted ripe olives', 'icing sugar', 'wafer', 'rump steak', 'avocados', 'uncle bens', 'lager', 'baby artichokes', 'key lime juice', 'cheese cubes', 'basmati rice', 'bean sauce', 'broccoli florets', 'konbu', 'fennel bulb', 'tagliatelle', 'hungarian paprika', 'crab', 'canela', 'boneless chicken', 'mature cheddar', 'dried lavender', 'natural yogurt', 'mcintosh apples', 'hoisin sauce', 'orange marmalade', 'creme fraiche', 'cream butter', 'curry', 'treacle', 'mint leaves', 'rutabaga', 'ponzu', 'spice cake mix', 'broad beans', 'pear juice', 'swordfish steaks', 'egg substitute', 'organic vegetable broth', 'tortillas', 'fat', 'pastry flour', 'chopped fresh thyme', 'polish sausage', 'graham cracker pie crust', 'dried chives', 'vanilla ice cream', 'knudsen sour cream', 'filling', 'custard', 'saffron threads', 'idaho potatoes', 'shiso leaves', 'laurel', 'dried basil', 'custard powder', 'quail', 'ruby red grapefruit', 'pink', 'fresh coriander', 'farro', 'sweet basil leaves', 'chicken cutlets', 'steamed rice', 'smoked ham hocks', 'grated orange', 'linguine', 'porcini mushrooms', 'oyster', 'radish', 'serrano', 'ranch style beans', 'jalapeno chilies', 'hoagie rolls', 'sriracha', 'panko', 'rich', 'ground cinnamon', 'chicken drumsticks', 'coffee powder', 'dry sherry', 'chile', 'condensed cream of celery soup', 'gin', 'frangelico', 'roasted red peppers', 'red capsicum', 'sausage casings', 'lean beef', 'soya', 'fresh lemon', 'syrup', 'ground nutmeg', 'tomato salsa', 'peach halves', 'bran flakes', 'grated coconut', 'distilled water', 'camembert', 'dried currants', 'pie crust mix', 'pound cake', 'chocolate syrup', 'celery leaves', 'smoked trout', 'coarse salt', 'powder', 'milk powder', 'tenderloin', 'apple', 'pickle relish', 'frozen cranberries', 'beef', 'canned chicken broth', 'potato gnocchi', 'accompaniment', 'kirby cucumbers', 'olive oil spray', 'soybean paste', 'sliced pineapple', 'espresso', 'hot pepper sauce', 'alcohol', 'medium zucchini', 'barley malt', 'chicken flavor stuffing mix', 'poblano chilies', 'ground', 'palm sugar', 'baking powder', 'corn chips', 'pancake mix', 'petite peas', 'seasoned rice wine vinegar', 'country ham', 'black vinegar', 'salsa verde', 'confectioners sugar', 'sweet rice flour', 'chipotle pepper', 'plain yogurt', 'process cheese spread', 'albacore', 'sugar', 'lemon slices', 'kalamata olives', 'chipotle peppers', 'dried minced garlic', 'coconut milk', 'large shrimp', 'spaghetti squash', 'catalina dressing', 'nonfat greek yogurt', 'kamaboko', 'crisp rice', 'macaroni and cheese dinner', 'stew meat', 'red chili pepper', 'tomatillos', 'baby carrots', 'nonfat dry milk', 'pure maple syrup', 'imported', 'browning', 'mandarin orange segments', 'nigella seeds', 'puy lentils', 'licorice', 'smoke flavoring', 'purple onion', 'roasted tomatoes', 'splenda', 'cayenne pepper sauce', 'veal stock', 'dill pickle', 'port wine', 'shiraz', 'flax seed', 'toasted walnuts', 'pickled jalapeno peppers', 'pork steaks', 'lillet', 'dried apples', 'preserves', 'snapper fillets', 'beef stock cubes', 'onions', 'white wine vinegar', 'corn oil', 'ruby port', 'carrots', 'dessicated coconut', 'dashi powder', 'jalapeno', 'florets', 'reduced fat mayonnaise', 'sirloin tip', 'bitters', 'protein powder', 'nonfat powdered milk', 'hand', 'epazote', 'vegetable broth', 'king prawns', 'corn', 'chocolate wafer cookies', 'unsweetened vanilla almond milk', 'table salt', 'fettucine', 'apple juice', 'vegan chocolate chips', 'venison', 'tamarind juice', 'anise extract', 'vidalia', 'large egg yolks', 'crushed tomatoes', 'apples', 'long green', 'game', 'caramel ice cream', 'coriander', 'dark chocolate', 'quick', 'raw pumpkin seeds', 'roasted almonds', 'rice vinegar', 'red kidney beans', 'nutella', 'colby cheese', 'ahi', 'chopped parsley', 'chinese rice wine', 'adobo sauce', 'head cauliflower', 'solid white tuna', 'anchovy paste', 'cacao powder', 'curly kale', 'chicken bouillon granules', 'steaks', 'olive', 'flavour', 'malt', 'pitted kalamata olives', 'soy', 'lacinato kale', 'nonfat milk', 'extra light olive oil', 'rice syrup', 'beet sugar', 'lychee', 'spinach', 'chopped fresh mint', 'candied peel', 'orange blossom honey', 'white beans', 'mild salsa', 'aniseed', 'stout', 'smoke', 'apple juice concentrate', 'grill seasoning', 'pineapple slices', 'dried garlic', 'accent seasoning', 'duck breast halves', 'taleggio', 'light mayonnaise', 'flounder', 'tamarind paste', 'tomatillo salsa', 'stuffing', 'potato chips', 'dry red wine', 'cold cut', 'dumplings', 'unsweetened almond milk', 'bow-tie pasta', 'adobo', 'romano', 'string cheese', 'brie cheese', 'toffee bits', 'capellini', 'pastry dough', 'boneless chicken breast halves', 'pasilla', 'sunflower seed', 'raspberry', 'unbaked pie shells', 'chicken stock cubes', 'kaiser rolls', 'unsweetened cocoa powder', 'louisiana hot sauce', 'self raising flour', 'beansprouts', 'navy beans', 'marinara sauce', 'chicken stock', 'mung beans', 'yellow miso', 'lime peel', 'ingredients', 'chile paste', 'kumquats', 'doritos', 'puffed wheat', 'hot chili', 'accent', 'dried pears', 'blue cheese', 'lime rind', 'grated orange peel', 'margarine', 'veal chops', 'juniper berries', 'white bread', 'radishes', 'raisins', 'melon', 'gumbo', 'pie filling', 'lamb rib chops', 'minute white rice', 'black forest ham', 'grapeseed oil', 'pepper sauce', 'chocolate sandwich cookies', 'french dressing', 'ground allspice', 'soy yogurt', 'other herbs', 'tomatoes with juice', 'hot chili paste', 'brisket', 'white sesame seeds', 'ketjap', 'old bay seasoning', 'cranberries', 'almond butter', 'skinless chicken thighs', 'gouda cheese', 'chocolate instant pudding', 'dipping chocolate', 'bbq sauce', 'juice', 'sugar in the raw', 'evaporated skim milk', 'dry milk', 'blueberry', 'tea powder', 'red curry paste', 'cereal flakes', 'sea salt', 'rock sugar', 'ham hock', 'ground flax', 'sweet pickles', 'tarragon sprigs', 'chiles', 'kahlua', 'ancho', 'bisquick', 'flour for dusting', 'liquid honey', 'dried oregano', 'spaghetti', 'raw cashews', 'velveeta', 'shredded sharp cheddar cheese', 'chinese five-spice powder', 'golden brown sugar', 'lime zest', 'duck breasts', 'flax', 'compressed yeast', 'splenda brown sugar blend', 'deli ham', 'spice blend', 'single crust pie', 'unrefined', 'striped bass', 'sazon goya', 'beef shank', 's', 'gluten free flour', 'bay leaves', 'methi', 'muscat', 'pasta sauce', 'mustard oil', 'fudge brownie mix', 'black sesame seeds', 'beef round', 'creole seasoning', 'vital wheat gluten', 'dark red kidney beans', 'sweet cream', 'sanding sugar', 'dandelion', 'red snapper', 'pepperoni slices', 'fish', 'vinegar', 'pastrami', 'italian seasoning', 'roquefort cheese', 'egg white', 'wheat', 'low sodium chicken', 'poblano', 'cabernet', 'white asparagus', 'porterhouse steaks', 'minced pork', 'cheddar', 'cones', 'shaoxing', 'frozen okra', 'orecchiette', 'buns', 'seafood seasoning', 'toasted pine nuts', 'ricotta cheese', 'less sodium chicken broth', 'english toffee bits', 'condensed cream of potato soup', 'bottom round', 'yellow corn meal', 'vietnamese fish sauce', 'soy protein', 'chopped celery', 'cold water', 'cream of mushroom soup', 'crumbled cornbread', 'vanilla pod', 'orange slices', 'habanero peppers', 'himalayan salt', 'thai chili paste', 'ground cloves', 'sliced salami', 'dark meat', 'spanish onion', 'granulated garlic', 'lavash', 'white hominy', 'pear tomatoes', 'sundried tomato', 'grated lemon zest', 'sodium', 'gingerroot', 'light cream', 'shredded lettuce', 'habanero', 'clear honey', 'green enchilada sauce', 'chopped garlic', 'seasoned flour', 'green apples', 'sweet potatoes', 'mediterranean', 'hazelnut', 'tuna fish', 'vidalia onions', 'garam masala', 'macaroni', 'bisquick baking mix', 'pimenton', 'dried beef', 'back ribs', 'chicken breast fillets', 'dried tomatoes', 'stick butter', 'braggs liquid aminos', 'unflavored gelatin', 'jelly', 'kraft sharp cheddar cheese', 'refrigerated pizza dough', 'kiwi', 'bologna', 'top sirloin', 'agave nectar', 'chopped green bell pepper', 'pimiento', 'raw', 'parsley flakes', 'cooking oil', 'chilli powder', 'bouillon', 'chili sauce', 'earl grey tea', 'unsulphured molasses', 'angel food cake mix', 'basmati', 'sweet corn kernels', 'cod fillets', 'carnation', 'orange peel', 'panko bread crumbs', 'strawberry jam', 'lemon grass', 'pineapples', 'chocolate curls', 'beef steak', 'yoghurt', 'dried red chile peppers', 'parma ham', 'sweetener', 'apricot preserves', 'roe', 'peppercorn', 'prepared horseradish', 'sherry wine vinegar', 'oranges', 'dry vermouth', 'grits', 'coloring', 'spareribs', 'chile de arbol', 'pureed pumpkin', 'light syrup', 'hot cocoa mix', 'vanilla pudding', 'red chili', 'white cake mix', 'eggplant', 'madras curry powder', 'shrimp shells', 'calories', 'applesauce', 'crimini mushrooms', 'condensed cream of mushroom soup', 'seasoning salt', 'watercress leaves', 'spicy brown mustard', 'italian tomatoes', 'cotija', 'yogurt', 'soy flour', 'pam cooking spray', 'squid', 'reduced fat cream cheese', 'unsweetened soymilk', 'dried dill', 'oyster sauce', 'wheat crackers', 'pie crust', 'flavoring', 'cooked rice', 'monterey jack', 'sweet white wine', 'scallops', 'cointreau', 'rice noodles', 'sugar pea', 'ground pork', 'rotelle', 'serrano pepper', 'cod fish', 'corn cereal', 'indian', 'buckwheat groats', 'apricot halves', 'mortadella', 'regular sugar', 'virgin coconut oil', 'meat tenderizer', 'graham flour', 'amchur', 'pink grapefruit', 'lettuce leaves', 'red pepper', 'heirloom tomatoes', 'orzo pasta', 'miso', 'pork spareribs', 'coconut', 'nonfat plain greek yogurt', 'ground oregano', 'low sodium chicken broth', 'quail eggs', 'milk', 'black bean sauce', 'turkey breast', 'reduced fat', 'kielbasa', 'ramen', 'plain breadcrumbs', 'dark beer', 'golden mushroom soup', 'corn flakes cereal', 'white kidney', 'chicken skin', 'kraft classic ranch dressing', 'dry white wine', 'dill pickles', 'biscuit mix', 'salted', 'spicy sausage', 'ground fennel', 'ciabatta', 'cottage cheese', 'marrow', 'baby beets', 'roasted turkey breast', 'clover honey', 'nuoc mam', 'italian rolls', 'green olives', 'wasabi', 'philadelphia cream cheese', 'bass', 'fat free cream cheese', 'currant', 'marjoram', 'spice', 'pico de gallo', 'bean sprouts', 'nam pla', 'chervil', 'gorgonzola', 'roasted garlic', 'guacamole', 'dill weed', 'much', 'streaky bacon', 'iceberg', 'sliced ham', 'hot water', 'dried tomato', 'pumpernickel', 'peppercorns', 'hard cider', 'mushroom caps', 'chocolate ice cream', 'pork shoulder roast', 'caster sugar', 'dried apple', 'pearl onions', 'grain', 'angel food cake', 'bottle', 'prawn', 'pistachio nuts', 'bread crumbs', 'egg yolks', 'top round steak', 'orange blossom', 'carrot', 'asian', 'cookie', 'chocolate candy', 'peach jam', 'ripe olives', 'teriyaki sauce', 'rolled oats', 'water chestnuts', 'smoked sausage', 'whipped topping', 'mascarpone', 'chili seasoning', 'garlic powder', 'wild rice', 'xanthan', 'low sodium beef broth', 'italian cheese', 'english muffins', 'potato starch', 'caraway seeds', 'chopped cilantro fresh', 'chicken breasts', 'pickled jalapenos', 'beef tenderloin steaks', 'soup', 'vanilla bean paste', 'round loaf', 'spelt', 'hot mustard', 'melted butter', 'bacon drippings', 'swordfish', 'white truffle', 'jimmy dean sausage', 'spring greens', 'coconut cream', 'chocolate chips', 'bonito flakes', 'whipped dessert topping', 'white miso', 'emerils essence', 'onion', 'chestnut mushrooms', 'root vegetables', 'half', 'mangos', 'lasagna sheets', 'pear', 'udon', 'sweet paprika', 'green onions', 'linguini', 'oreos', 'not available', 'borlotti', 'breadcrumbs', 'poppy seeds', 'cinnamon sugar', 'egg bread', 'brown rice', 'roasted hazelnuts', 'sliced olives', 'bell pepper', 'canned tomatoes', 'gnocchi', 'sorghum', 'sweetcorn', 'pesto sauce', 'pappardelle pasta', 'portobello caps', 'sazon seasoning', 'butter flavor', 'heinz tomato ketchup', 'pine nuts', 'pizza crust', 'golden raisins', 'orzo', 'dried blueberries', 'anisette', 'oleo', 'bourbon', 'double crust pie', 'chocolate candy bars', 'toasted coconut', 'crisco shortening', 'matzo meal', 'creamy peanut butter', 'sauce mix', 'leg of lamb', 'with skin', 'currant jelly', 'caster', 'chiffonade', 'littleneck clams', 'hothouse cucumber', 'crawfish', 'tostitos', 'crumbled gorgonzola', 'bananas', 'madeira wine', 'filo', 'coarse grain mustard', 'colby jack cheese', 'bulb', 'turmeric', 'veal', 'root', 'ground nuts', 'sweet red peppers', 'partially', 'summer squash', 'star anise', 'bread dough', 'ranch dressing', 'bouillon powder', 'bolillo', 'fat free yogurt', 'splenda granular', 'cheddar cheese soup', 'ham', 'guava', 'straw mushrooms', 'long grain rice', 'pitted prunes', 'white chocolate', 'ginger powder', 'mustard', 'dried chili pepper', 'ham steak', 'cayenne pepper', 'boneless skinless chicken breast halves', 'candy bar', 'coarse sea salt', 'stilton cheese', 'agave', 'golden delicious apples', 'ground chipotle chile pepper', 'seedless watermelon', 'food coloring', 'prime rib', 'maple syrup', 'spinach leaves', 'vermouth', 'shallot', 'soy milk', 'instant rice', 'bay scallops', 'wieners', 'mincemeat', 'marshmallow', 'guar', 'instant pudding mix', 'horseradish', 'grated cotija', 'yams', 'banana pudding', 'chipotle chile', 'minced onion', 'dry yeast', 'boneless sirloin', 'sage leaves', 'freshly grated parmesan', 'flavored', 'candy', 'gruyere cheese', 'pan drippings', 'walnut halves', 'waffle', 'strip steaks', 'lemon thyme', 'gluten', 'unsalted pistachios', 'tapioca flour', 'crusty bread', 'sesame seed', 'black mission figs', 'leaves', 'cornmeal', 'blackberry', 'hershey chocolate', 'grated parmesan romano', 'hamburger', 'semisweet baking chocolate', 'cream cheese', 'all natural', 'romaine lettuce', 'rock shrimp', 'mung bean', 'vanilla bean', 'extra-virgin olive oil', 'pink beans', 'reposado', 'onion flakes', 'cocoa', 'salad dressing', 'grated pecorino', 'chicken base', 'aged balsamic vinegar', 'butter salt', 'frozen blackberries', 'rotisserie chicken', 'hazelnuts', 'green curry paste', 'spring roll wrappers', 'pepper jack', 'dill', 'frozen broccoli', 'ground cayenne pepper', 'poppy seed', 'pork belly', 'light beer', 'white pepper', 'bicarbonate of soda', 'lowfat yogurt', 'crepes', 'navel oranges', 'spring', 'italian bread', 'canned beef broth', 'grape jelly', 'smoked turkey sausage', 'anchovy fillets', 'crystallized ginger', 'toasted sesame seeds', 'tortilla wraps', 'potatoes', 'golden syrup', 'vanilla essence', 'hot dogs', 'grated nutmeg', 'artichoke hearts', 'wax beans', 'minced parsley', 'vanilla lowfat yogurt', 'pork baby back ribs', 'chives', 'marshmallow cream', 'lady fingers', 'stuffing mix', 'leaf parsley', 'maple sugar', 'brown rice flour', 'cooked shrimp', 'cheddar cheese blend', 'ground flax seed', 'coconut rum', 'beef sirloin', 'turbinado', 'duck', 'rotel tomatoes', 'sliced beets', 'boneless skinless chicken breasts', 'dried fruit', 'cracked pepper', 'hot chili oil', 'chestnut', 'leaving', 'orange extract', 'peach yogurt', 'frankfurters', 'new potatoes', 'great northern beans', 'thyme', 'beef rib roast', 'carob powder', 'green peppers', 'artichokes', 'anise', 'bacardi', 'pistachios', 'halibut fillets', 'shoulder roast', 'sliced apples', 'red onion', 'japanese soy sauce', 'sausage', 'prosecco', 'filberts', 'mexican cheese blend', 'pimento stuffed olives', 'malted milk', 'pace picante sauce', 'frozen hash browns', 'shredded mozzarella cheese', 'puree', 'light rum', 'brown lentils', 'mozzarella string cheese', 'aleppo pepper', 'white sugar', 'sweet sherry', 'soymilk', 'english cucumber', 'absinthe', 'lemon pepper', 'wholewheat flour', 'salmon fillets', 'lavender', 'strawberries', 'snow peas', 'black olives', 'beef fat', 'sugar substitute', 'saltines', 'cooked meatballs', 'smoked ham', 'fish steaks', 'sweet rice wine', 'cabbage leaves', 'granola', 'sesame', 'red food coloring', 'meal', 'mesclun', 'sesame seed oil', 'chunky', 'cod', 'butter beans', 'toasted pecans', 'herb seasoned stuffing mix', 'provolone cheese', 'frozen green beans', 'frozen mango', 'parmesan', 'unsalted almonds', 'garbanzo bean flour', 'salt', 'fennel fronds', 'morsels', 'rhubarb', 'scallop', 'chocolate drink', 'peeled plum tomatoes', 'unsweetened coconut milk', 'milk chocolate chips', 'garlic paste', 'toasted slivered almonds', 'sherry', 'white truffle oil', 'asafoetida powder', 'daikon', 'wonton wrappers', 'gray salt', 'achiote', 'passata', 'raw almonds', 'shrimp stock', 'tuna packed in olive oil', 'hot smoked paprika', 'cooking apples', 'tawny port', 'aged cheddar', 'amber', 'plus', 'red currant jelly', 'lemon verbena', 'sour cherries', 'pecorino romano cheese', 'herbes de provence', 'dijon', 'stewed tomatoes', 'mussels', 'caramel sauce', 'molasses', 'chickpea', 'fingerling potatoes', 'egg yolk', 'brioche bread', 'flour tortillas', 'veggies', 'dried apricot', 'wide egg noodles', 'italian herbs', 'champagne', 'round steaks', 'gouda', 'mixed mushrooms', 'tea leaves', 'lamb stock', 'ciabatta loaf', 'beans', 'brazil nuts', 'brown gravy mix', 'guajillo', 'guar gum', 'nacho chips', 'dried dates', 'fresh lime', 'peanut butter', 'sourdough bread', 'carob', 'sponge cake', 'gravy mix', 'hot chili pepper', 'ground paprika', 'burrata', 'tart apples', 'kohlrabi', 'raspberry preserves', 'hen', 'madeira', 'trout', 'cider', 'black mustard seeds', 'half & half', 'almond', 'turmeric powder', 'haddock fillets', 'nondairy creamer', 'corn syrup', 'ground hazelnuts', 'watercress', 'rib', 'macadamia nuts', 'goat', 'crumb crust', 'beef liver', 'seed oil', 'frozen broccoli florets', 'vanilla sugar', 'rotini', 'passion fruit juice', 'chili flakes', 'chipotles in adobo', 'simple syrup', 'white bread flour', 'alfalfa sprouts', 'wheat germ', 'fruit pectin', 'vanilla bean seeds', 'crema', 'pork shoulder', 'citric', 'capers', 'seedless raspberry jam', 'sweet vermouth', 'juice concentrate', 'sticky rice', 'greek feta', 'cognac', 'liquid', 'hearts of palm', 'peach preserves', 'tea', 'bread mix', 'burgundy wine', 'curry powder', 'jasmine rice', 'mild cheddar cheese', 'clean', 'haddock', 'veal cutlets', 'power', 'citrus juice', 'fresh mint', 'cold milk', 'pork and beans', 'dark chocolate chips', 'herb seasoned stuffing', 'green bell peppers', 'dried navy beans', 'boneless', 'chocolate bars', 'rice stick noodles', 'lime juice', 'burdock', 'pimento', 'turkey carcass', 'blueberry jam', 'cumin powder', 'white cabbage', 'medium egg noodles', 'beet', 'orange segments', 'prepared pizza crust', 'soft tofu', 'banana leaves', 'dried kidney beans', 'cloves', 'lemon pudding', 'butter flavor shortening', 'rump roast', 'muffins', 'allspice berries', 'sundae syrup', 'habanero pepper', 'cherry preserves', 'cointreau liqueur', 'lemon balm', 'radicchio', 'graham crackers', 'seedless cucumber', 'cracked wheat', 'gingersnap cookies', 'double crust', 'plum', 'brown gravy', 'pot roast', 'chicken sausage', 'beef roast', 'trans fat', 'dried black beans', 'pepper', 'grape', 'chickpea flour', 'dijon mustard', 'sliced shallots', 'rice paper', 'cakes', 'balsamic vinegar', 'honeydew', 'colors', 'white rice vinegar', 'desiccated coconut', 'rye', 'green leaf lettuce', 'grana', 'vegetarian chicken', 'cannellini beans', 'banana extract', 'sunflower', 'turnips', 'parmigiano reggiano cheese', 'red delicious apples', 'frozen limeade concentrate', 'hard salami', 'chunky peanut butter', 'cumin seed', 'shiso', 'seltzer water', 'light margarine', 'condensed chicken broth', 'candied fruit', 'dried parsley flakes', 'turkey broth', 'honey mustard', 'orange juice', 'rice milk', 'galliano', 'white cornmeal', 'banana', 'blanched almonds', 'refrigerated biscuits', 'sorbet', 'chinese sausage', 'creamer', 'lemon juice', 'dried coconut', 'raspberry jam', 'frozen peaches', 'unsalted butter', 'sicilian', 'duck sauce', 'bulgur wheat', 'masa harina', 'flour tortilla', 'jerk seasoning', 'blue crabs', 'fresh lime juice', 'pork stock', 'wondra', 'mango powder', 'annatto', 'fondant', 'red grapefruit', 'silver', 'lemon wedge', 'raspberry vinegar', 'spanish olives', 'steak seasoning', 'cavatappi', 'japanese rice', 'brown mustard seeds', 'protein', 'white rum', 'active dry yeast', 'soda water', 'carbonated water', 'gingersnap crumbs', 'rice wine', 'dal', 'five-spice powder', 'sea scallops', 'processed cheese', 'laughing cow', 'beef base', 'cardamom pods', 'taco bell taco seasoning mix', 'candied ginger', 'burger buns', 'sumac', 'sherbet', 'rice bran oil', 'reduced sodium soy sauce', 'pear nectar', 'cassis', 'black cardamom pods', 'potato soup', 'club soda', 'ouzo', 'sea salt flakes', 'condensed milk', 'pitted black olives', 'butter', 'ginger', 'chicken bouillon', 'tomato soup', 'fuji apples', 'mixed nuts', 'twists', 'condensed cheddar cheese soup', 'hash brown', 'boneless chuck roast', 'garlic sauce', 'firm tofu', 'evaporated milk', 'jalapenos', 'unsalted chicken stock', 'fish sauce', 'unsweetened chocolate', 'vinaigrette', 'hominy', 'mixed greens', 'chilegarlic sauce', 'jack cheese', 'coconut extract', 'celery seeds', 'red potato', 'pomegranate juice', 'french fries', 'ground mustard', 'bonito', 'broccoli rabe', 'multigrain bread', 'wonton skins', 'tart shells', 'lamb', 'sherry wine', 'beetroot', 'almond milk', 'aubergine', 'fresh dill', 'strawberry preserves', 'cider vinegar', 'arugula', 'marshmallow creme', 'espresso beans', 'prunes', 'pearled barley', 'peppers', 'bourbon whiskey', 'cooked beef', 'gluten flour', 'baking potatoes', 'nama shoyu', 'dried tart cherries', 'cashew nuts', 'pig', 'red chile', 'cherry', 'lime wedges', 'cooked chickpeas', 'unsweetened applesauce', 'cornflour', 'drippings', 'dried rice', 'asian pear', 'green tea', 'sunflower oil', 'ground blanched almonds', 'lardons', 'peanut sauce', 'fresh orange', 'franks', 'garlic minced', 'sparkling wine', 'roast beef', 'purple', 'rabbit', 'blue', 'allspice', 'nectarines', 'wheat gluten', 'pitted green olives', 'mango chutney', 'seasoning', 'roast', 'sourdough starter', 'giardiniera', 'pork', 'sandwich bread', 'canola', 'sliced carrots', 'blanched', 'red apples', 'crosswise', 'zest', 'spring water', 'mixed fruit', 'slaw', 'diced tomatoes', 'dry roasted peanuts', 'fontina cheese', 'philadelphia light cream cheese', 'refried beans', 'bartlett pears', 'sprite', 'peach puree', 'rice bran', 'strawberry yogurt', 'spicy pork sausage', 'tamarind concentrate', 'pectin', 'taco seasoning mix', 'lemons', 'tomato juice', 'fenugreek seeds', 'french mustard', 'pasilla chiles', 'shiitake mushroom caps', 'beet greens', 'dry rub', 'grape tomatoes', 'mayonnaise', 'buckwheat', 'quickcooking grits', 'baked ham', 'citron', 'pepperoncini', 'dried cranberries', 'olives', 'savory', 'rice blend', 'chai', 'calamata olives', '1% low-fat milk', 'grana padano', 'nonfat dry milk powder', 'apricot jam', 'sauce', 'waxy potatoes', 'skinless chicken breasts', 'condiments', 'hot peppers', 'arborio rice', 'ras el hanout', 'ginger syrup', 'matcha', 'sweet peas', 'yellow squash', 'sugar syrup', 'string beans', 'condensed golden mushroom soup', 'serrano chile', 'corn flakes', 'extra', 'rose water', 'mexican chocolate', 'boneless pork loin', 'mustard greens', 'rounds', 'breakfast sausage links', 'slider buns', 'yellow rice', 'extract', 'sliced green olives', 'whitefish', 'apple pie spice', 'coffee liqueur', 'nori', 'freshly ground pepper', 'red', 'espresso powder', 'ground turkey breast', 'nut', 'clementines', 'tomatillo', 'umeboshi', 'boneless beef chuck roast', 'batter', 'asian fish sauce', 'orange flower water', 'caviar', 'cranberry sauce', 'sharp cheddar cheese', 'rock salt', 'minced beef', 'vodka', 'irish whiskey', 'mustard seed', 'chopped cilantro', 'ranch seasoning', 'dried yeast', 'frosting', 'spring onions', 'marinade', 'runny honey', 'hazelnut liqueur', 'mulberries', 'black pepper', 'cracked black pepper', 'celery salt', 'beer', 'chianti', 'cheddar cheese', 'rum extract', 'sandwiches', 'fenugreek leaves', 'tomato puree', 'ciabatta rolls', 'white distilled vinegar', 'sour cream', 'cream of coconut', 'hass avocado', 'peeled shrimp', 'rosemary', 'sugar cookie mix', 'lemon', 'lean ground beef', 'boysenberries', 'large garlic cloves', 'crisco', 'lemon extract', 'salami', 'mushroom soup', 'walnut', 'vanilla instant pudding', 'cauliflower florets', 'anchovy', 'pumpkin seeds', 'liquid pectin', 'scotch', 'earth balance', 'bread', 'country bread', 'spanish chorizo', 'bottled clam juice', 'blackberry jam', 'turkey kielbasa', 'sweetened coconut', 'meringue powder', 'nut butter', 'frozen corn', 'roquefort', 'deveined shrimp', 'frozen peas', 'cranberry', 'easy', 'vanilla soy milk', 'shanks', 'cereal', 'seeds', 'sage', 'soft margarine', 'steamer', 'summer savory', 'hemp seeds', 'love', 'pecorino cheese', 'sweetened dried cranberries', 'rosemary sprigs', 'garlic and herb seasoning', 'frozen whipped topping', 'spanish smoked paprika', 'ginger juice', 'cabernet sauvignon', 'goat cheese', 'whey protein', 'tuna steaks', 'cornish hens', 'szechwan peppercorns', 'flavor', 'truffle oil', 'ground meat', 'roasted cashews', 'roux', 'cooking wine', 'thyme leaves', 'maraschino cherries', 'scallion', 'cubed potatoes', 'peaches', 'button mushrooms', 'lavender flowers', 'black rice', 'applewood smoked bacon', 'distilled', 'miniature semisweet chocolate chips', 'thai green curry paste', 'bran', 'pretzels', 'kirsch', 'pickling spices', 'frozen mixed vegetables', 'carnaroli rice', 'cherry gelatin', 'lemon curd', 'noodles', 'cardamom seed', 'pastry', 'fresh parsley', 'self rising flour', 'jicama', 'tenderloin steaks', 'instant espresso powder', 'brewed espresso', 'flatbread', 'dried cherries', 'raw sugar', 'ground coriander', 'medium eggs', 'cinnamon', 'filet', 'graham cracker crusts', 'dried lavender blossoms', 'phyllo pastry', 'cutlet', 'cocktail peanuts', 'granny smith apples', 'pinot grigio', 'beef bouillon', 'acorn squash', 'tuna', 'israeli couscous', 'roma tomatoes', 'butter lettuce', 'fontina', 'yuzu juice', 'salmon', 'smoked mozzarella', 'adobo seasoning', 'part-skim mozzarella cheese', 'swanson chicken broth', 'cooked turkey', 'instant chicken bouillon', 'pink salmon', 'instant coffee', 'dried chickpeas', 'sesame paste', 'fingerling', 'slivered almonds', 'soybean'])

DB_URL = "postgresql://jelani:NRuQTD22a3wc42z1j_cLdw@free-tier4.aws-us-west-2.cockroachlabs.cloud:26257/ingredients?sslmode=verify-full&options=--cluster%3Dhunter-codfish-3992"
conn = psycopg2.connect(DB_URL)
c = conn.cursor()

def parse_ingredients(parsed_ingredients):
    ingredients_json = []
    for ingredient in parsed_ingredients:
        tokens = ingredient.split()
        # print(tokens)
        if not tokens:
            continue

        name = ""
        unit = ""
        quantity = ""
        mode = "QUANTITY"
        for token in tokens:
            if token == "[QUANTITY]":
                quantity = ""
                mode = "QUANTITY"
            elif token == "[UNIT]":
                unit = ""
                mode = "UNIT"
            elif token == "[NAME]":
                name = ""
                mode = "NAME"
            elif mode == "QUANTITY":
                quantity += token + " "
            elif mode == "UNIT":
                unit += token + " "
            else:
                name += token + " "

        # print(quantity, unit, name)
        if quantity:
            quantity = quantity[:-1]
        if unit:
            unit = unit[:-1]
        if unit == "none":
            unit = None
        if not name:
            continue

        name = name[:-1]

        ingredient_json = {}
        try:
            ingredient_json["qty"] = quantity_parser.parse(quantity)["quantity"][0]["amount"]
        except:
            ingredient_json["qty"] = 1

        try:
            name = name.lower()
            if name in top_ingredients:
                ingredient_json["name"] = name
            else:
                top_partial = (0, None)
                top_ratio = (0, None)
                for clean_name in top_ingredients:
                    score = fuzz.partial_ratio(clean_name, name)
                    if score == 100:
                        score_full = fuzz.ratio(clean_name, name)
                        if score_full > top_ratio[0]:
                            top_ratio = (score_full, clean_name)
                    else:
                        if score > top_partial[0]:
                            top_partial = (score, clean_name)
                if top_ratio[0]:
                    ingredient_json["name"] = top_ratio[1]
                else:
                    ingredient_json["name"] = top_partial[1]
                # print("original:", name, "||| cleaned:", ingredient["name"])
        except:
            print("error")
            ingredient_json["name"] = name.lower()

        if unit:
            try:
                for possible_unit in unit.split():
                    if possible_unit in units:
                        ingredient_json["unit"] = possible_unit
                        break
                    elif possible_unit in unit_map:
                        ingredient_json["unit"] = unit_map[possible_unit]
                        break
                try:
                    possible_unit = quantity_parser.parse("0 " + unit)["quantity"][0]["unit"]
                    if possible_unit in units:
                        ingredient_json["unit"] = possible_unit
                    elif possible_unit in unit_map:
                        ingredient_json["unit"] = unit_map[possible_unit]
                except:
                    print("unit parse error")

            # print("original:", unit, "||| cleaned:", new)
            except:
                print("error")
                # ingredient.pop("unit")
        ingredients_json.append(ingredient_json)
    return ingredients_json

SMALL_BASE_PROMPT = '[PROMPT] [BR] 1 cup couscous [BR] 1 cup chicken broth (I prefer Better Than Bouillon) [BR] 1 teaspoon butter [BR] 14 cup parmesan cheese [BR] 12 cup frozen peas [BR] salt [BR] fresh ground pepper [PARSING] [BR] [QUANTITY] 1 [UNIT] cup [NAME] couscous [BR] [QUANTITY] 1 [UNIT] cup [NAME] chicken broth [BR] [QUANTITY] 1 [UNIT] teaspoon [NAME] butter [BR] [QUANTITY] 14 [UNIT] cup [NAME] cheese [BR] [QUANTITY] 12 [UNIT] cup [NAME] peas [BR] [QUANTITY] 1 [UNIT] none [NAME] salt [BR] [QUANTITY] 1 [UNIT] none [NAME] pepper [SEPARATOR] [PROMPT] [BR] 1 package of Pillsbury croissant rolls per pizza [BR] 1 jar of pizza sauce [BR] 1/2 cup bacon bits [BR] 1/4 cup pepperoni [BR] 1/2 cup fresh spinach [BR] 1/2 cup cooked italian sausage, skinned removed and chopped up [BR] 1 cup mozzarella cheese [BR] 1 cup fresh parmesan [BR] 1/2 red onion, sliced thin [BR] 1 may use round pizza pan, or rectangular cooking sheet [PARSING] [BR] [QUANTITY] 1 [UNIT] package [NAME] rolls [BR] [QUANTITY] 1 [UNIT] none [NAME] pizza sauce [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] bacon bits [BR] [QUANTITY] 0.25 [UNIT] cup [NAME] pepperoni [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] spinach [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] italian sausage [BR] [QUANTITY] 1 [UNIT] cup [NAME] mozzarella cheese [BR] [QUANTITY] 1 [UNIT] cup [NAME] None [BR] [QUANTITY] 0.5 [UNIT] none [NAME] onion [BR] [QUANTITY] 1 [UNIT] none [NAME] a [SEPARATOR] [PROMPT] [BR] 1/2 pounds Whole Wheat Spaghetti [BR] 1/2 blocks (about 12 To 14 Oz. Size) Tofu, Cubed [BR] 1 cup Bean Sprouts [BR] 1 whole Onion [BR] 1 whole Shredded Carrot [BR] 1 cup Shredded Cabbage [BR] 1/4 cups Peanut Butter [BR] 1- 1/2 Tablespoon Lime Juice [BR] 1 Tablespoon Red Curry Paste [BR] 13 cups Veggie Stock [BR] 1 Tablespoon Chopped Ginger [BR] 1 teaspoon Chopped Garlic [BR] 1 pinch Salt And Pepper [PARSING] [BR] [QUANTITY] 0.5 [UNIT] pound [NAME] whole wheat [BR] [QUANTITY] 0.5 [UNIT] none [NAME] s [BR] [QUANTITY] 1 [UNIT] cup [NAME] bean sprouts [BR] [QUANTITY] 1 [UNIT] none [NAME] onion [BR] [QUANTITY] 1 [UNIT] none [NAME] shredded carrots [BR] [QUANTITY] 1 [UNIT] cup [NAME] shredded cabbage [BR] [QUANTITY] 0.25 [UNIT] cup [NAME] butter [BR] [QUANTITY] 0.5 [UNIT] none [NAME] lime [BR] [QUANTITY] 1 [UNIT] none [NAME] red curry paste [BR] [QUANTITY] 13 [UNIT] cup [NAME] stock [BR] [QUANTITY] 1 [UNIT] none [NAME] chopped [BR] [QUANTITY] 1 [UNIT] teaspoon [NAME] garlic [BR] [QUANTITY] 1 [UNIT] pinch [NAME] pepper [SEPARATOR] [PROMPT] [BR] 1 medium onion, chopped [BR] 2 lbs hamburger [BR] 1 cup diced celery [BR] 1 (8 ounce) can mushroom soup [BR] 2 cups water [BR] 12 cup soya sauce [BR] 1 cup long grain rice [PARSING] [BR] [QUANTITY] 1 [UNIT] none [NAME] onion [BR] [QUANTITY] 2 [UNIT] none [NAME] hamburger [BR] [QUANTITY] 1 [UNIT] cup [NAME] celery [BR] [QUANTITY] 1 [UNIT] none [NAME] mushroom soup [BR] [QUANTITY] 2 [UNIT] cup [NAME] water [BR] [QUANTITY] 12 [UNIT] cup [NAME] sauce [BR] [QUANTITY] 1 [UNIT] cup [NAME] rice [SEPARATOR] '
BIG_BASE_PROMPT = '[PROMPT] [BR] 1 cup couscous [BR] 1 cup chicken broth (I prefer Better Than Bouillon) [BR] 1 teaspoon butter [BR] 14 cup parmesan cheese [BR] 12 cup frozen peas [BR] salt [BR] fresh ground pepper [PARSING] [BR] [QUANTITY] 1 [UNIT] cup [NAME] couscous [BR] [QUANTITY] 1 [UNIT] cup [NAME] chicken broth [BR] [QUANTITY] 1 [UNIT] teaspoon [NAME] butter [BR] [QUANTITY] 14 [UNIT] cup [NAME] cheese [BR] [QUANTITY] 12 [UNIT] cup [NAME] peas [BR] [QUANTITY] 1 [UNIT] none [NAME] salt [BR] [QUANTITY] 1 [UNIT] none [NAME] pepper [SEPARATOR] [PROMPT] [BR] 1 package of Pillsbury croissant rolls per pizza [BR] 1 jar of pizza sauce [BR] 1/2 cup bacon bits [BR] 1/4 cup pepperoni [BR] 1/2 cup fresh spinach [BR] 1/2 cup cooked italian sausage, skinned removed and chopped up [BR] 1 cup mozzarella cheese [BR] 1 cup fresh parmesan [BR] 1/2 red onion, sliced thin [BR] 1 may use round pizza pan, or rectangular cooking sheet [PARSING] [BR] [QUANTITY] 1 [UNIT] package [NAME] rolls [BR] [QUANTITY] 1 [UNIT] none [NAME] pizza sauce [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] bacon bits [BR] [QUANTITY] 0.25 [UNIT] cup [NAME] pepperoni [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] spinach [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] italian sausage [BR] [QUANTITY] 1 [UNIT] cup [NAME] mozzarella cheese [BR] [QUANTITY] 1 [UNIT] cup [NAME] None [BR] [QUANTITY] 0.5 [UNIT] none [NAME] onion [BR] [QUANTITY] 1 [UNIT] none [NAME] a [SEPARATOR] [PROMPT] [BR] 1/2 pounds Whole Wheat Spaghetti [BR] 1/2 blocks (about 12 To 14 Oz. Size) Tofu, Cubed [BR] 1 cup Bean Sprouts [BR] 1 whole Onion [BR] 1 whole Shredded Carrot [BR] 1 cup Shredded Cabbage [BR] 1/4 cups Peanut Butter [BR] 1- 1/2 Tablespoon Lime Juice [BR] 1 Tablespoon Red Curry Paste [BR] 13 cups Veggie Stock [BR] 1 Tablespoon Chopped Ginger [BR] 1 teaspoon Chopped Garlic [BR] 1 pinch Salt And Pepper [PARSING] [BR] [QUANTITY] 0.5 [UNIT] pound [NAME] whole wheat [BR] [QUANTITY] 0.5 [UNIT] none [NAME] s [BR] [QUANTITY] 1 [UNIT] cup [NAME] bean sprouts [BR] [QUANTITY] 1 [UNIT] none [NAME] onion [BR] [QUANTITY] 1 [UNIT] none [NAME] shredded carrots [BR] [QUANTITY] 1 [UNIT] cup [NAME] shredded cabbage [BR] [QUANTITY] 0.25 [UNIT] cup [NAME] butter [BR] [QUANTITY] 0.5 [UNIT] none [NAME] lime [BR] [QUANTITY] 1 [UNIT] none [NAME] red curry paste [BR] [QUANTITY] 13 [UNIT] cup [NAME] stock [BR] [QUANTITY] 1 [UNIT] none [NAME] chopped [BR] [QUANTITY] 1 [UNIT] teaspoon [NAME] garlic [BR] [QUANTITY] 1 [UNIT] pinch [NAME] pepper [SEPARATOR] [PROMPT] [BR] 3 tablespoons unsalted butter [BR] 5 cloves garlic, finely chopped [BR] 1 tablespoon grated fresh ginger [BR] 2 large red bell peppers, stemmed, seeded, and diced [BR] 1 cup white wine [BR] 1/2 cup chicken stock, mixed with 1 teaspoon cornstarch [BR] 1 1/2 tablespoons soy sauce [BR] 1/2 teaspoon freshly ground black pepper [BR] 1 cup cooked black beans [BR] 2 1/2 pounds large raw shrimp, peeled and deveined [BR] 10 green onions, trimmed and sliced thinly on the diagonal [BR] 1/2 small bunch cilantro, coarse stems removed [PARSING] [BR] [QUANTITY] 3 [UNIT] tablespoon [NAME] unsalted butter [BR] [QUANTITY] 5 [UNIT] clove [NAME] garlic [BR] [QUANTITY] 1 [UNIT] tablespoon [NAME] ginger [BR] [QUANTITY] 2 [UNIT] none [NAME] red bell peppers [BR] [QUANTITY] 1 [UNIT] cup [NAME] white wine [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] chicken stock [BR] [QUANTITY] 1.5 [UNIT] tablespoon [NAME] soy sauce [BR] [QUANTITY] 0.5 [UNIT] teaspoon [NAME] black pepper [BR] [QUANTITY] 1 [UNIT] cup [NAME] black beans [BR] [QUANTITY] 2.5 [UNIT] pound [NAME] shrimp [BR] [QUANTITY] 10 [UNIT] none [NAME] onions [BR] [QUANTITY] 0.5 [UNIT] bunch [NAME] cilantro [SEPARATOR]'
# BASE_PROMPT = '[PROMPT] [BR] 1 cup couscous [BR] 1 cup chicken broth (I prefer Better Than Bouillon) [BR] 1 teaspoon butter [BR] 14 cup parmesan cheese [BR] 12 cup frozen peas [BR] salt [BR] fresh ground pepper [PARSING] [BR] [QUANTITY] 1 [UNIT] cup [NAME] couscous [BR] [QUANTITY] 1 [UNIT] cup [NAME] chicken broth [BR] [QUANTITY] 1 [UNIT] teaspoon [NAME] butter [BR] [QUANTITY] 14 [UNIT] cup [NAME] cheese [BR] [QUANTITY] 12 [UNIT] cup [NAME] peas [BR] [QUANTITY] 1 [UNIT] none [NAME] salt [BR] [QUANTITY] 1 [UNIT] none [NAME] pepper [SEPARATOR] [PROMPT] [BR] 1 package of Pillsbury croissant rolls per pizza [BR] 1 jar of pizza sauce [BR] 1/2 cup bacon bits [BR] 1/4 cup pepperoni [BR] 1/2 cup fresh spinach [BR] 1/2 cup cooked italian sausage, skinned removed and chopped up [BR] 1 cup mozzarella cheese [BR] 1 cup fresh parmesan [BR] 1/2 red onion, sliced thin [BR] 1 may use round pizza pan, or rectangular cooking sheet [PARSING] [BR] [QUANTITY] 1 [UNIT] package [NAME] rolls [BR] [QUANTITY] 1 [UNIT] none [NAME] pizza sauce [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] bacon bits [BR] [QUANTITY] 0.25 [UNIT] cup [NAME] pepperoni [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] spinach [BR] [QUANTITY] 0.5 [UNIT] cup [NAME] italian sausage [BR] [QUANTITY] 1 [UNIT] cup [NAME] mozzarella cheese [BR] [QUANTITY] 1 [UNIT] cup [NAME] None [BR] [QUANTITY] 0.5 [UNIT] none [NAME] onion [BR] [QUANTITY] 1 [UNIT] none [NAME] a [SEPARATOR] [PROMPT] [BR] 1/2 pounds Whole Wheat Spaghetti [BR] 1/2 blocks (about 12 To 14 Oz. Size) Tofu, Cubed [BR] 1 cup Bean Sprouts [BR] 1 whole Onion [BR] 1 whole Shredded Carrot [BR] 1 cup Shredded Cabbage [BR] 1/4 cups Peanut Butter [BR] 1- 1/2 Tablespoon Lime Juice [BR] 1 Tablespoon Red Curry Paste [BR] 13 cups Veggie Stock [BR] 1 Tablespoon Chopped Ginger [BR] 1 teaspoon Chopped Garlic [BR] 1 pinch Salt And Pepper [PARSING] [BR] [QUANTITY] 0.5 [UNIT] pound [NAME] whole wheat [BR] [QUANTITY] 0.5 [UNIT] none [NAME] s [BR] [QUANTITY] 1 [UNIT] cup [NAME] bean sprouts [BR] [QUANTITY] 1 [UNIT] none [NAME] onion [BR] [QUANTITY] 1 [UNIT] none [NAME] shredded carrots [BR] [QUANTITY] 1 [UNIT] cup [NAME] shredded cabbage [BR] [QUANTITY] 0.25 [UNIT] cup [NAME] butter [BR] [QUANTITY] 0.5 [UNIT] none [NAME] lime [BR] [QUANTITY] 1 [UNIT] none [NAME] red curry paste [BR] [QUANTITY] 13 [UNIT] cup [NAME] stock [BR] [QUANTITY] 1 [UNIT] none [NAME] chopped [BR] [QUANTITY] 1 [UNIT] teaspoon [NAME] garlic [BR] [QUANTITY] 1 [UNIT] pinch [NAME] pepper [SEPARATOR] [PROMPT] [BR] 1 medium onion, chopped [BR] 2 lbs hamburger [BR] 1 cup diced celery [BR] 1 (8 ounce) can mushroom soup [BR] 2 cups water [BR] 12 cup soya sauce [BR] 1 cup long grain rice [PARSING] [BR] [QUANTITY] 1 [UNIT] none [NAME] onion [BR] [QUANTITY] 2 [UNIT] none [NAME] hamburger [BR] [QUANTITY] 1 [UNIT] cup [NAME] celery [BR] [QUANTITY] 1 [UNIT] none [NAME] mushroom soup [BR] [QUANTITY] 2 [UNIT] cup [NAME] water [BR] [QUANTITY] 12 [UNIT] cup [NAME] sauce [BR] [QUANTITY] 1 [UNIT] cup [NAME] rice [SEPARATOR] [PROMPT] [BR] 1 cup uncooked rotini [BR] 3 cans vegetable broth [BR] 2 boneless, skinless chicken breasts (about 8 ounces) [BR] 1 (30-ounce) jar of extra chunky spaghetti sauce with mushrooms and diced onions [BR] 1 medium onion, chopped [BR] 1/2 teaspoon garlic puree [BR] 1/3 teaspoon Italian seasoning [BR] 3 teaspoons red wine (optional) [BR] 1 (14.5-ounce) can stewed tomatoes, cut up in juice [BR] 1 medium zucchini sliced [PARSING] [BR] [QUANTITY] 1 [UNIT] cup [NAME] rotini [BR] [QUANTITY] 3 [UNIT] can [NAME] vegetable broth [BR] [QUANTITY] 2 [UNIT] none [NAME] chicken breasts [BR] [QUANTITY] 1 [UNIT] none [NAME] onions [BR] [QUANTITY] 1 [UNIT] none [NAME] onion [BR] [QUANTITY] 0.5 [UNIT] teaspoon [NAME] garlic puree [BR] [QUANTITY] 1 [UNIT] teaspoon [NAME] italian seasoning [BR] [QUANTITY] 3 [UNIT] teaspoon [NAME] red wine [BR] [QUANTITY] 1 [UNIT] none [NAME] stewed tomatoes [BR] [QUANTITY] 1 [UNIT] none [NAME] zucchini [SEPARATOR]'
SEP_TOKEN = "[SEPARATOR]"
def scrape_recipe(url):
    try:
        scraper = scrape_me(url)
    except:
        return "URL not supported"

    if len(url) > 255:
        return "URL too long"
    
    ingredients = scraper.ingredients()
    if not ingredients:
        return "Ingredients not found in recipe; check URL"
    
    value_input = "[PROMPT] "
    for ingredient in ingredients:
        value_input += "[BR] " + ingredient + " "
    value_input += "[PARSING] "
    
    try:
        response = co.generate(
            model='gptd-instruct-tft',
            prompt=BIG_BASE_PROMPT + value_input,
            max_tokens=256,
            temperature=0,
            k=0,
            p=1,
            frequency_penalty=0,
            presence_penalty=0,
            stop_sequences=["[SEPARATOR]"],
            return_likelihoods='NONE')
    except:
        response = co.generate(
            model='gptd-instruct-tft',
            prompt=SMALL_BASE_PROMPT + value_input,
            max_tokens=256,
            temperature=0,
            k=0,
            p=1,
            frequency_penalty=0,
            presence_penalty=0,
            stop_sequences=["[SEPARATOR]"],
            return_likelihoods='NONE')
    text = response.generations[0].text
    text = text.split(SEP_TOKEN)[0]
    parsed_ingredients_json = parse_ingredients(text.split("[BR]"))
    # print(parsed_ingredients)
    
    return {
        "title": scraper.title(),
        "id": str(uuid.uuid4())[-12:],
        "url": url,
        "instructions": '\n'.join(scraper.instructions_list()),
        "parsedIngredients": parsed_ingredients_json
    }

def add_recipe(recipe):
    try:
        name = recipe["title"].replace("'", "")
        if len(name) > 127:
            name = name[:128]
        id_ = recipe["id"]
        url = recipe["url"]
        instructions = recipe["instructions"].replace("'", "")
    except:
        return "Bad recipe info"
    if len(url) > 255:
        return "URL too long"
    
    batch_ingredients = []
    if "parsedIngredients" in recipe:
        for ingredient in recipe["parsedIngredients"]:
            if "name" not in ingredient:
                continue

            ingredient_name = ingredient["name"]
            if not ingredient_name:
                continue
            unit = ingredient.get("unit", "none")
            qty = ingredient.get("qty", 1)
            if qty == 0:
                qty = 1

            batch_ingredients.append((id_, ingredient_name, unit, float(qty)))
    
    try:
        c.execute("INSERT INTO recipes(name, id, url, instructions) VALUES %s"%str((name, id_, url, instructions)))
        values = ""
        for ingredient in batch_ingredients:
            values += str(ingredient) + ", "
        values = values[:-2]
        c.execute("INSERT INTO parsed_ingredients(id, name, unit, quantity) VALUES %s"%values)
        conn.commit()
    except:
        conn.commit()
        return "Failed to insert into DB"
    return "SUCCESS"

@app.route("/")
def index():
    return render_template('index.html')

@app.route("/scrape-url", methods=['GET'])
def scrape_url():
    url = request.args.get('url')
    recipe_info = scrape_recipe(url)
    if isinstance(recipe_info, str):
        return recipe_info, 400
    return jsonify(recipe_info)

@app.route("/add-recipe", methods=['POST'])
def add_recipe_route():
    recipe = request.get_json()
    result = add_recipe(recipe)
    if result == "SUCCESS":
        return "SUCCESS", 200
    return result, 400

'''@app.route("/ask-bot", methods = ['POST'])
def ask_bot():
    # print(jsonify(request.data))
    messages = request.get_json(force=True)
    prompt = "<|startoftext|>"
    for message in messages:
        prompt += message + delim
    prompt = prompt[:-len(delim)] + " <|answer|>"
    # print(prompt)

    answer = invoke_model(prompt)
    if len(answer) <= 0:
        return jsonify("Hello World!")
    answers = answer.split("<|answer|> ")
    if (len(answers) >= 1):
        answer = answers[1]
    else:
        answer = answers[0]

    return jsonify(answer.split(delim))

def invoke_model(prompt):
    generated = torch.tensor(tokenizer.encode(prompt, truncation=True, max_length=768)).unsqueeze(0)
    with torch.no_grad():
      sample_outputs = model.generate(
                                      generated,
                                      # bos_token_id=random.randint(1,30000),
                                      do_sample=True,
                                      max_length = 300,
                                      # top_k=50,
                                      # top_p=0.95
                                      num_return_sequences=1
                                      )

    return tokenizer.decode(sample_outputs[0], skip_special_tokens=True)
    # print(tokenizer.decode(sample_outputs[0], skip_special_tokens=True))'''
